((e,t)=>{"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BrickCms",[],t):"object"==typeof exports?exports.BrickCms=t():e.BrickCms=t()})(self,()=>{return n={"./node_modules/js-cookie/dist/js.cookie.js":function(e){e.exports=(()=>{function u(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)e[r]=n[r]}return e}return function t(c,i){function r(e,t,r){if("undefined"!=typeof document){"number"==typeof(r=u({},i,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n,o="";for(n in r)r[n]&&(o+="; "+n,!0!==r[n])&&(o+="="+r[n].split(";")[0]);return document.cookie=e+"="+c.write(t,e)+o}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},n=0;n<t.length;n++){var o=t[n].split("="),i=o.slice(1).join("=");try{var u=decodeURIComponent(o[0]);if(r[u]=c.read(i,u),e===u)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",u({},t,{expires:-1}))},withAttributes:function(e){return t(this.converter,u({},this.attributes,e))},withConverter:function(e){return t(u({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(c)}})}({read:function(e){return(e='"'===e[0]?e.slice(1,-1):e).replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})})()},"./src/brickcms.ts":function(e,t,r){var o,n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=(this&&this.__importStar||(o=function(e){return(o=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),n=0;n<r.length;n++)"default"!==r[n]&&i(t,e,r[n]);return u(t,e),t}))(r("./node_modules/js-cookie/dist/js.cookie.js")),s={document:{},navigator:{userAgent:""},location:{protocol:"file",hostname:""},jQuery:{}};function a(e,t){return null===e||e===n||isNaN(e)?t:e}"undefined"!=typeof window&&((s=window).jQuery=window.jQuery||window.Zepto||window.$);function d(e){if(Object.keys)return Object.keys(e);if(e!==Object(e))throw new TypeError("Invalid object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}var p=s.navigator.userAgent||"";Object.defineProperty(f.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),f.prototype.gcb=function(e){function t(e){return(e<10?"0":"")+e}(e=void 0===e?new Date:e).getTimezoneOffset();return e.getFullYear()+""+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())[0]},f.prototype.trim=function(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")},f.prototype.groupBy=function(e,n,t){if(null===a(e,null))return[];var r=[],o={};e.forEach(function(e){var t=e[n],r=o[t];null===a(r,null)&&(o[t]=r={key:t,items:[]}),r.items.push(e)});for(var i=0,u=Object.entries(o);i<u.length;i++){var c=u[i],c=(c[0],c[1]);r.push(c),t&&t(c)}return this.sortOn(r,"key")},f.prototype.myStoreId=function(){return c.get("myStoreId")},f.prototype.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},f.prototype.encode=function(t){try{return encodeURIComponent(t)}catch(e){return t}},f.prototype.slugify=function(e){return e=""!==(e=e||"")?e.toLowerCase().replace(/[^0-9a-z\-\_]+/gi,"-").replace(/[\-]+/gi,"-"):e},f.prototype.queryParseString=function(e){e=(e||"").replace("?","").replace("#","");for(var t=/(\w+)\[(\d+)\]/,r=this.decode,n={},o=e.split("&"),i=0;i<o.length;i++){var u=o[i].split("="),c=r(u[0]),c=t.exec(c);c?(n[c[1]]=n[c[1]]||[],n[c[1]][c[2]]=r(u[1])):n[u[0]]=r(u[1]||"")}return n},f.prototype.queryStringify=function(e,t){var r,n,o,i=this.encode,u=[];for(r in e)e.hasOwnProperty(r)&&(n=t?t+"["+r+"]":r,o=e[r],u.push(null!==o&&"object"==typeof o?this.queryStringify(o,n):i(n)+"="+i(o)));return u.join("&")},f.prototype.geoDistance=function(e,t,r,n,o){function i(e){return e*Math.PI/180}var e={latitude:e,longitude:t},t={latitude:r,longitude:n},r={km:6371,mile:3960,meter:6371e3,nmi:3440},n=(o=o||{}).unit in r?r[o.unit]:r.km,r=i(t.latitude-e.latitude),u=i(t.longitude-e.longitude),e=i(e.latitude),t=i(t.latitude),r=Math.sin(r/2)*Math.sin(r/2)+Math.sin(u/2)*Math.sin(u/2)*Math.cos(e)*Math.cos(t),u=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return o.threshold?o.threshold>n*u:n*u},f.prototype.geoOrderByOrigin=function(e,r,t){var n=this,o=[];e.forEach(function(e){var t=n.geoDistance(r.latitude,r.longitude,e.latitude,e.longitude,{unit:"mile"});o.push({point:e,distance:t})}),this.sortOn(o,"distance"),t({origin:r,results:o})},f.prototype.storeSelect=function(e){c.set("myStoreId",e),this.jq("head").trigger("storeSelected",{store:e})},f.prototype.sortOn=function(e,r){return e?e.length<=0?[]:("string"==typeof e[0][r]?e.sort(function(e,t){return(e[r]&&e[r].toLowerCase())<(t[r]&&t[r].toLowerCase())?-1:(e[r]&&e[r].toLowerCase())>(t[r]&&t[r].toLowerCase())?1:0}):e.sort(function(e,t){return e[r]<t[r]?-1:t[r]<e[r]?1:0}),e):null};r=f;function f(){var e,t,r=this,n=r.trim(s.location.hostname.toLowerCase()),o=(r.site={hostname:n,domain:n.replace("www.",""),config:{}},r.browser={isIE:(o=(n=p).indexOf("MSIE "),e=n.indexOf("Trident/"),t=n.indexOf("rv:"),0<o?parseInt(n.substring(o+5,n.indexOf(".",o)),10):0<e&&parseInt(n.substring(t+3,n.indexOf(".",t)),10)),isMobile:/iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/gi.test(p),isAndroid:/(android)/gi.test(p),isIOS:/iP(hone|od|ad)/gi.test(p)},r.cookies=c,r.win=s,r.doc=s.document,r.jq=s.jQuery,r.keys=d,r.isNull=a,"https://cdn2.brickinc.net/geoipme/?buster="+(new Date).getTime());fetch(o).then(function(e){if(e.ok)return e.json();throw new Error("HTTP error! status: ".concat(e.status))}).then(function(e){e.latitude&&(r.myGeo=e)}).catch(function(e){console.error("Error fetching geoip:",e)})}e.exports=new r}},o={},function e(t){var r=o[t];return void 0===r&&(r=o[t]={exports:{}},n[t].call(r.exports,r,r.exports,e)),r.exports}("./src/brickcms.ts");var n,o});