!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BrickCms",[],t):"object"==typeof exports?exports.BrickCms=t():e.BrickCms=t()}(self,()=>{return n={"./node_modules/js-cookie/dist/js.cookie.js":function(e){e.exports=function(){"use strict";function u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var e,t;function n(c,i){function r(e,t,r){if(typeof document==="undefined")return;r=u({},i,r);if(typeof r.expires==="number")r.expires=new Date(Date.now()+r.expires*864e5);if(r.expires)r.expires=r.expires.toUTCString();e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var o in r){if(!r[o])continue;n+="; "+o;if(r[o]===true)continue;n+="="+r[o].split(";")[0]}return document.cookie=e+"="+c.write(t,e)+n}function e(e){if(typeof document==="undefined"||arguments.length&&!e)return;var t=document.cookie?document.cookie.split("; "):[];var r={};for(var n=0;n<t.length;n++){var o=t[n].split("=");var i=o.slice(1).join("=");try{var u=decodeURIComponent(o[0]);r[u]=c.read(i,u);if(e===u)break}catch(e){}}return e?r[e]:r}return Object.create({set:r,get:e,remove:function(e,t){r(e,"",u({},t,{expires:-1}))},withAttributes:function(e){return n(this.converter,u({},this.attributes,e))},withConverter:function(e){return n(u({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(c)}})}return n({read:function(e){if(e[0]==='"')e=e.slice(1,-1);return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},"./src/brickcms.ts":function(e,t,r){"use strict";var n,o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=(this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t})(r("./node_modules/js-cookie/dist/js.cookie.js")),c={document:{},navigator:{userAgent:""},location:{protocol:"file",hostname:""}};function s(e,t){return null===e||e===n||isNaN(e)?t:e}"undefined"!=typeof window&&(c=window);function a(e){if(Object.keys)return Object.keys(e);if(e!==Object(e))throw new TypeError("Invalid object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}var d=c.navigator.userAgent||"";Object.defineProperty(p.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),p.prototype.trim=function(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")},p.prototype.groupBy=function(e,n,r){var o,i;return null===s(e,null)?[]:(o=[],i={},e.forEach(function(e){var t=e[n],r=i[t];null===s(r,null)&&(i[t]=r={key:t,items:[]}),r.items.push(e)}),this.jq.each(i,function(e,t){t.$idx=e,o.push(t),r&&r(t)}),this.sortOn(o,"key"))},p.prototype.myStoreId=function(){return u.get("myStoreId")},p.prototype.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},p.prototype.encode=function(t){try{return encodeURIComponent(t)}catch(e){return t}},p.prototype.slugify=function(e){return e=""!==(e=e||"")?e.toLowerCase().replace(/[^0-9a-z\-\_]+/gi,"-").replace(/[\-]+/gi,"-"):e},p.prototype.queryParseString=function(e){e=(e||"").replace("?","").replace("#","");for(var t=/(\w+)\[(\d+)\]/,r=this.decode,n={},o=e.split("&"),i=0;i<o.length;i++){var u=o[i].split("="),c=r(u[0]),c=t.exec(c);c?(n[c[1]]=n[c[1]]||[],n[c[1]][c[2]]=r(u[1])):n[u[0]]=r(u[1]||"")}return n},p.prototype.queryStringify=function(e,t){var r,n,o,i=this.encode,u=[];for(r in e)e.hasOwnProperty(r)&&(n=t?t+"["+r+"]":r,o=e[r],u.push(null!==o&&"object"==typeof o?this.queryStringify(o,n):i(n)+"="+i(o)));return u.join("&")},p.prototype.geoDistance=function(e,t,r,n,o){function i(e){return e*Math.PI/180}var e={latitude:e,longitude:t},t={latitude:r,longitude:n},r={km:6371,mile:3960,meter:6371e3,nmi:3440},n=(o=o||{}).unit in r?r[o.unit]:r.km,r=i(t.latitude-e.latitude),u=i(t.longitude-e.longitude),e=i(e.latitude),t=i(t.latitude),r=Math.sin(r/2)*Math.sin(r/2)+Math.sin(u/2)*Math.sin(u/2)*Math.cos(e)*Math.cos(t),u=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return o.threshold?o.threshold>n*u:n*u},p.prototype.geoOrderByOrigin=function(e,r,t){var n=this,o=[];e.forEach(function(e){var t=n.geoDistance(r.latitude,r.longitude,e.latitude,e.longitude,{unit:"mile"});o.push({point:e,distance:t})}),this.sortOn(o,"distance"),t({origin:r,results:o})},p.prototype.storeSelect=function(e){u.set("myStoreId",e),this.jq("head").trigger("storeSelected",{store:e})},p.prototype.sortOn=function(e,r){return e?e.length<=0?[]:("string"==typeof e[0][r]?e.sort(function(e,t){return(e[r]&&e[r].toLowerCase())<(t[r]&&t[r].toLowerCase())?-1:(e[r]&&e[r].toLowerCase())>(t[r]&&t[r].toLowerCase())?1:0}):e.sort(function(e,t){return e[r]<t[r]?-1:e[r]>t[r]?1:0}),e):null};r=p;function p(){var e,t,r,n=this,o=n.trim(c.location.hostname.toLowerCase());n.site={hostname:o,domain:o.replace("www.",""),config:{}},n.browser={isIE:(e=(o=d).indexOf("MSIE "),t=o.indexOf("Trident/"),r=o.indexOf("rv:"),0<e?parseInt(o.substring(e+5,o.indexOf(".",e)),10):0<t&&parseInt(o.substring(r+3,o.indexOf(".",r)),10)),isMobile:/iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/gi.test(d),isAndroid:/(android)/gi.test(d),isIOS:/iP(hone|od|ad)/gi.test(d)},n.cookies=u,n.win=c,n.doc=c.document,n.jq=jQuery||$,n.keys=a,n.isNull=s,this.jq.getJSON("https://cdn2.brickinc.net/geoipme/?buster="+(new Date).getTime(),function(e){e.latitude&&(n.myGeo=e)})}e.exports=new r}},o={},function e(t){var r=o[t];return void 0===r&&(r=o[t]={exports:{}},n[t].call(r.exports,r,r.exports,e)),r.exports}("./src/brickcms.ts");var n,o});