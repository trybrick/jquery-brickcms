!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BrickCms",[],t):"object"==typeof exports?exports.BrickCms=t():e.BrickCms=t()}(self,()=>{return r={"./node_modules/js-cookie/dist/js.cookie.js":function(e){e.exports=function(){"use strict";function u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var e,t;function r(c,i){function n(e,t,n){if(typeof document==="undefined")return;n=u({},i,n);if(typeof n.expires==="number")n.expires=new Date(Date.now()+n.expires*864e5);if(n.expires)n.expires=n.expires.toUTCString();e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var o in n){if(!n[o])continue;r+="; "+o;if(n[o]===true)continue;r+="="+n[o].split(";")[0]}return document.cookie=e+"="+c.write(t,e)+r}function e(e){if(typeof document==="undefined"||arguments.length&&!e)return;var t=document.cookie?document.cookie.split("; "):[];var n={};for(var r=0;r<t.length;r++){var o=t[r].split("=");var i=o.slice(1).join("=");try{var u=decodeURIComponent(o[0]);n[u]=c.read(i,u);if(e===u)break}catch(e){}}return e?n[e]:n}return Object.create({set:n,get:e,remove:function(e,t){n(e,"",u({},t,{expires:-1}))},withAttributes:function(e){return r(this.converter,u({},this.attributes,e))},withConverter:function(e){return r(u({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(c)}})}return r({read:function(e){if(e[0]==='"')e=e.slice(1,-1);return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},"./src/brickcms.ts":function(e,t,n){"use strict";var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=(this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t})(n("./node_modules/js-cookie/dist/js.cookie.js")),c={document:{},navigator:{userAgent:""},location:{protocol:"file",hostname:""}};function s(e,t){return null===e||e===r||isNaN(e)?t:e}"undefined"!=typeof window&&(c=window);function a(e){if(Object.keys)return Object.keys(e);if(e!==Object(e))throw new TypeError("Invalid object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}var d=c.navigator.userAgent||"";Object.defineProperty(f.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),f.prototype.gcb=function(e){function t(e){return(e<10?"0":"")+e}(e=void 0===e?new Date:e).getTimezoneOffset();return e.getFullYear()+""+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())[0]},f.prototype.trim=function(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")},f.prototype.groupBy=function(e,r,n){var o,i;return null===s(e,null)?[]:(o=[],i={},e.forEach(function(e){var t=e[r],n=i[t];null===s(n,null)&&(i[t]=n={key:t,items:[]}),n.items.push(e)}),this.jq.each(i,function(e,t){t.$idx=e,o.push(t),n&&n(t)}),this.sortOn(o,"key"))},f.prototype.myStoreId=function(){return u.get("myStoreId")},f.prototype.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},f.prototype.encode=function(t){try{return encodeURIComponent(t)}catch(e){return t}},f.prototype.slugify=function(e){return e=""!==(e=e||"")?e.toLowerCase().replace(/[^0-9a-z\-\_]+/gi,"-").replace(/[\-]+/gi,"-"):e},f.prototype.queryParseString=function(e){e=(e||"").replace("?","").replace("#","");for(var t=/(\w+)\[(\d+)\]/,n=this.decode,r={},o=e.split("&"),i=0;i<o.length;i++){var u=o[i].split("="),c=n(u[0]),c=t.exec(c);c?(r[c[1]]=r[c[1]]||[],r[c[1]][c[2]]=n(u[1])):r[u[0]]=n(u[1]||"")}return r},f.prototype.queryStringify=function(e,t){var n,r,o,i=this.encode,u=[];for(n in e)e.hasOwnProperty(n)&&(r=t?t+"["+n+"]":n,o=e[n],u.push(null!==o&&"object"==typeof o?this.queryStringify(o,r):i(r)+"="+i(o)));return u.join("&")},f.prototype.geoDistance=function(e,t,n,r,o){function i(e){return e*Math.PI/180}var e={latitude:e,longitude:t},t={latitude:n,longitude:r},n={km:6371,mile:3960,meter:6371e3,nmi:3440},r=(o=o||{}).unit in n?n[o.unit]:n.km,n=i(t.latitude-e.latitude),u=i(t.longitude-e.longitude),e=i(e.latitude),t=i(t.latitude),n=Math.sin(n/2)*Math.sin(n/2)+Math.sin(u/2)*Math.sin(u/2)*Math.cos(e)*Math.cos(t),u=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return o.threshold?o.threshold>r*u:r*u},f.prototype.geoOrderByOrigin=function(e,n,t){var r=this,o=[];e.forEach(function(e){var t=r.geoDistance(n.latitude,n.longitude,e.latitude,e.longitude,{unit:"mile"});o.push({point:e,distance:t})}),this.sortOn(o,"distance"),t({origin:n,results:o})},f.prototype.storeSelect=function(e){u.set("myStoreId",e),this.jq("head").trigger("storeSelected",{store:e})},f.prototype.sortOn=function(e,n){return e?e.length<=0?[]:("string"==typeof e[0][n]?e.sort(function(e,t){return(e[n]&&e[n].toLowerCase())<(t[n]&&t[n].toLowerCase())?-1:(e[n]&&e[n].toLowerCase())>(t[n]&&t[n].toLowerCase())?1:0}):e.sort(function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0}),e):null};n=f;function f(){var e,t,n,r=this,o=r.trim(c.location.hostname.toLowerCase());r.site={hostname:o,domain:o.replace("www.",""),config:{}},r.browser={isIE:(e=(o=d).indexOf("MSIE "),t=o.indexOf("Trident/"),n=o.indexOf("rv:"),0<e?parseInt(o.substring(e+5,o.indexOf(".",e)),10):0<t&&parseInt(o.substring(n+3,o.indexOf(".",n)),10)),isMobile:/iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/gi.test(d),isAndroid:/(android)/gi.test(d),isIOS:/iP(hone|od|ad)/gi.test(d)},r.cookies=u,r.win=c,r.doc=c.document,r.jq=jQuery||$,r.keys=a,r.isNull=s,this.jq.getJSON("https://cdn2.brickinc.net/geoipme/?buster="+(new Date).getTime(),function(e){e.latitude&&(r.myGeo=e)})}e.exports=new n}},o={},function e(t){var n=o[t];return void 0===n&&(n=o[t]={exports:{}},r[t].call(n.exports,n,n.exports,e)),n.exports}("./src/brickcms.ts");var r,o});