((e,t)=>{"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BrickCms",[],t):"object"==typeof exports?exports.BrickCms=t():e.BrickCms=t()})(self,()=>{return r={"./node_modules/js-cookie/dist/js.cookie.js":function(e){e.exports=(()=>{function u(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)e[n]=r[n]}return e}return function t(c,i){function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=u({},i,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r,o="";for(r in n)n[r]&&(o+="; "+r,!0!==n[r])&&(o+="="+n[r].split(";")[0]);return document.cookie=e+"="+c.write(t,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},r=0;r<t.length;r++){var o=t[r].split("="),i=o.slice(1).join("=");try{var u=decodeURIComponent(o[0]);if(n[u]=c.read(i,u),e===u)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",u({},t,{expires:-1}))},withAttributes:function(e){return t(this.converter,u({},this.attributes,e))},withConverter:function(e){return t(u({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(c)}})}({read:function(e){return(e='"'===e[0]?e.slice(1,-1):e).replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})})()},"./src/brickcms.ts":function(e,t,n){var o,r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=(this&&this.__importStar||(o=function(e){return(o=Object.getOwnPropertyNames||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[n.length]=t);return n})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),r=0;r<n.length;r++)"default"!==n[r]&&i(t,e,n[r]);return u(t,e),t}))(n("./node_modules/js-cookie/dist/js.cookie.js")),s={document:{},navigator:{userAgent:""},location:{protocol:"file",hostname:""},jQuery:{}};function a(e,t){return null===e||e===r||isNaN(e)?t:e}"undefined"!=typeof window&&((s=window).jQuery=window.jQuery||window.Zepto||window.$);function d(e){if(Object.keys)return Object.keys(e);if(e!==Object(e))throw new TypeError("Invalid object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}var l=s.navigator.userAgent||"";Object.defineProperty(p.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),p.prototype.gcb=function(e){function t(e){return(e<10?"0":"")+e}(e=void 0===e?new Date:e).getTimezoneOffset();return e.getFullYear()+""+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())[0]},p.prototype.trim=function(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")},p.prototype.groupBy=function(e,r,t){if(null===a(e,null))return[];var n=[],o={};e.forEach(function(e){var t=e[r],n=o[t];null===a(n,null)&&(o[t]=n={key:t,items:[]}),n.items.push(e)});for(var i=0,u=Object.entries(o);i<u.length;i++){var c=u[i],c=(c[0],c[1]);n.push(c),t&&t(c)}return this.sortOn(n,"key")},p.prototype.myStoreId=function(){return c.get("myStoreId")},p.prototype.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},p.prototype.encode=function(t){try{return encodeURIComponent(t)}catch(e){return t}},p.prototype.slugify=function(e){return e=""!==(e=e||"")?e.toLowerCase().replace(/[^0-9a-z\-\_]+/gi,"-").replace(/[\-]+/gi,"-"):e},p.prototype.queryParseString=function(e){e=(e||"").replace("?","").replace("#","");for(var t=/(\w+)\[(\d+)\]/,n=this.decode,r={},o=e.split("&"),i=0;i<o.length;i++){var u=o[i].split("="),c=n(u[0]),c=t.exec(c);c?(r[c[1]]=r[c[1]]||[],r[c[1]][c[2]]=n(u[1])):r[u[0]]=n(u[1]||"")}return r},p.prototype.queryStringify=function(e,t){var n,r,o,i=this.encode,u=[];for(n in e)e.hasOwnProperty(n)&&(r=t?t+"["+n+"]":n,o=e[n],u.push(null!==o&&"object"==typeof o?this.queryStringify(o,r):i(r)+"="+i(o)));return u.join("&")},p.prototype.geoDistance=function(e,t,n,r,o){function i(e){return e*Math.PI/180}var e={latitude:e,longitude:t},t={latitude:n,longitude:r},n={km:6371,mile:3960,meter:6371e3,nmi:3440},r=(o=o||{}).unit in n?n[o.unit]:n.km,n=i(t.latitude-e.latitude),u=i(t.longitude-e.longitude),e=i(e.latitude),t=i(t.latitude),n=Math.sin(n/2)*Math.sin(n/2)+Math.sin(u/2)*Math.sin(u/2)*Math.cos(e)*Math.cos(t),u=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return o.threshold?o.threshold>r*u:r*u},p.prototype.geoOrderByOrigin=function(e,n,t){var r=this,o=[];e.forEach(function(e){var t=r.geoDistance(n.latitude,n.longitude,e.latitude,e.longitude,{unit:"mile"});o.push({point:e,distance:t})}),this.sortOn(o,"distance"),t({origin:n,results:o})},p.prototype.storeSelect=function(e){c.set("myStoreId",e);var t=this.doc.getElementByTagName("head"),e=new CustomEvent("storeSelected",{bubbles:!0,cancelable:!0,detail:{myStoreId:e}});t.dispatchEvent(e)},p.prototype.sortOn=function(e,n){return e?e.length<=0?[]:("string"==typeof e[0][n]?e.sort(function(e,t){return(e[n]&&e[n].toLowerCase())<(t[n]&&t[n].toLowerCase())?-1:(e[n]&&e[n].toLowerCase())>(t[n]&&t[n].toLowerCase())?1:0}):e.sort(function(e,t){return e[n]<t[n]?-1:t[n]<e[n]?1:0}),e):null};n=p;function p(){var e,t,n=this,r=n.trim(s.location.hostname.toLowerCase()),o=(n.site={hostname:r,domain:r.replace("www.",""),config:{}},n.browser={isIE:(o=(r=l).indexOf("MSIE "),e=r.indexOf("Trident/"),t=r.indexOf("rv:"),0<o?parseInt(r.substring(o+5,r.indexOf(".",o)),10):0<e&&parseInt(r.substring(t+3,r.indexOf(".",t)),10)),isMobile:/iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/gi.test(l),isAndroid:/(android)/gi.test(l),isIOS:/iP(hone|od|ad)/gi.test(l)},n.cookies=c,n.win=s,n.doc=s.document,n.jq=s.jQuery,n.keys=d,n.isNull=a,"https://cdn2.brickinc.net/geoipme/?buster="+(new Date).getTime());fetch(o).then(function(e){if(e.ok)return e.json();throw new Error("HTTP error! status: ".concat(e.status))}).then(function(e){e.latitude&&(n.myGeo=e)}).catch(function(e){console.error("Error fetching geoip:",e)})}e.exports=new n}},o={},function e(t){var n=o[t];return void 0===n&&(n=o[t]={exports:{}},r[t].call(n.exports,n,n.exports,e)),n.exports}("./src/brickcms.ts");var r,o});